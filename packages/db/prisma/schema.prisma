generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  member  
  admin
}

model User {
  id             String         @id @default(uuid())
  email          String         @unique     
  password       String    
  name           String
  photo          String?
  
  chats          Chat[]
  rooms          Room[]
  adminOf        Room[]   @relation("RoomAdmin")

}

//Workspace room
model Room {
  id             Int           @id @default(autoincrement())
  slug           String        @unique                         //Name of room
  createdAt      DateTime      @default(now())
  adminId        String  
  members        String[]                                     //to store members who can access virtual workspace room
  role           Role[]                                     // member or admin

  chats          Chat[]
  admin          User          @relation( "RoomAdmin", fields: [adminId], references: [id])
  member         User          @relation(fields: [members], references: [id])
}


model Chat{
  id              Int          @id @default(autoincrement())
  message         String   
  roomId          Int   
  userId          String

  user            User     @relation(fields: [userId], references: [id])
  room            Room     @relation(fields: [roomId], references: [id])
}